{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rohan/Code/01-project---online-shop-individual-RohanSChandra/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rohan/Code/01-project---online-shop-individual-RohanSChandra/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{loadStripe}from\"@stripe/stripe-js\";var createCheckoutSession=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(priceId){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"\".concat(process.env.REACT_APP_API_URL,\"/checkout-session\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({quantity:1,priceId:priceId})});case 2:response=_context.sent;_context.next=5;return response.json();case 5:return _context.abrupt(\"return\",_context.sent);case 6:case\"end\":return _context.stop();}}},_callee);}));return function createCheckoutSession(_x){return _ref.apply(this,arguments);};}();var checkout=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(priceId){var _yield$createCheckout,sessionId,stripe;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return createCheckoutSession(priceId);case 2:_yield$createCheckout=_context2.sent;sessionId=_yield$createCheckout.sessionId;_context2.next=6;return loadStripe(process.env.REACT_APP_STRIPE_PUBLIC_KEY);case 6:stripe=_context2.sent;_context2.next=9;return stripe.redirectToCheckout({sessionId:sessionId});case 9:case\"end\":return _context2.stop();}}},_callee2);}));return function checkout(_x2){return _ref2.apply(this,arguments);};}();export{checkout};","map":{"version":3,"sources":["/Users/rohan/Code/01-project---online-shop-individual-RohanSChandra/src/services/checkout.js"],"names":["loadStripe","createCheckoutSession","priceId","fetch","process","env","REACT_APP_API_URL","method","headers","body","JSON","stringify","quantity","response","json","checkout","sessionId","REACT_APP_STRIPE_PUBLIC_KEY","stripe","redirectToCheckout"],"mappings":"iXAAA,OAASA,UAAT,KAA2B,mBAA3B,CAEA,GAAMC,CAAAA,qBAAqB,0FAAG,iBAAOC,OAAP,qJACLC,CAAAA,KAAK,WACvBC,OAAO,CAACC,GAAR,CAAYC,iBADW,sBAE1B,CACEC,MAAM,CAAE,MADV,CAEEC,OAAO,CAAE,CACP,eAAgB,kBADT,CAFX,CAKEC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBC,QAAQ,CAAE,CADS,CAEnBV,OAAO,CAAPA,OAFmB,CAAf,CALR,CAF0B,CADA,QACtBW,QADsB,qCAefA,CAAAA,QAAQ,CAACC,IAAT,EAfe,6GAAH,kBAArBb,CAAAA,qBAAqB,4CAA3B,CAkBA,GAAMc,CAAAA,QAAQ,2FAAG,kBAAOb,OAAP,wLACaD,CAAAA,qBAAqB,CAACC,OAAD,CADlC,6CACPc,SADO,uBACPA,SADO,wBAEMhB,CAAAA,UAAU,CAACI,OAAO,CAACC,GAAR,CAAYY,2BAAb,CAFhB,QAETC,MAFS,uCAGTA,CAAAA,MAAM,CAACC,kBAAP,CAA0B,CAC9BH,SAAS,CAATA,SAD8B,CAA1B,CAHS,yDAAH,kBAARD,CAAAA,QAAQ,8CAAd,CAQA,OAASA,QAAT","sourcesContent":["import { loadStripe } from \"@stripe/stripe-js\";\n\nconst createCheckoutSession = async (priceId) => {\n  const response = await fetch(\n    `${process.env.REACT_APP_API_URL}/checkout-session`,\n    {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        quantity: 1,\n        priceId,\n      }),\n    }\n  );\n\n  return await response.json();\n};\n\nconst checkout = async (priceId) => {\n  const { sessionId } = await createCheckoutSession(priceId);\n  const stripe = await loadStripe(process.env.REACT_APP_STRIPE_PUBLIC_KEY);\n  await stripe.redirectToCheckout({\n    sessionId,\n  });\n};\n\nexport { checkout };\n"]},"metadata":{},"sourceType":"module"}